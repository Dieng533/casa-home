<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact - Teranga Home</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="shortcut icon" href="../public/assets/images/logo_casahome.png" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Script Lottie pour l'animation du chatbot -->
  <script src="https://unpkg.com/@lottiefiles/dotlottie-web@latest/dist/dotlottie-web.js"></script>
  <style>
    :root {
      --primary-blue: #2AA4CD;
      --primary-orange: #EB6F27;
      --light-blue: #E6F4F9;
      --dark-blue: #1A7A9A;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      color: #333;
    }
    
    .navbar-branding {
      background-color: white;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    
    .navbar-brand {
      font-weight: 700;
      display: flex;
      align-items: center;
    }
    
    .navbar-brand img {
      height: 60px;
      margin-right: 10px;
    }
    
    .nav-link {
      font-weight: 500;
      color: #555 !important;
      position: relative;
      padding: 8px 12px !important;
    }
    
    .nav-link.active {
      color: var(--primary-blue) !important;
    }
    
    .nav-link.active:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 12px;
      right: 12px;
      height: 2px;
      background-color: var(--primary-blue);
    }
    
    .btn-primary {
      background-color: var(--primary-orange);
      border-color: var(--primary-orange);
      color: white;
    }
    
    .btn-primary:hover {
      background-color: #D96523;
      border-color: #D96523;
    }
    
    .btn-outline-primary {
      border-color: var(--primary-blue);
      color: var(--primary-blue);
    }
    
    .btn-outline-primary:hover {
      background-color: var(--primary-blue);
      color: white;
    }
    
    .text-primary {
      color: var(--primary-blue) !important;
    }
    
    .site-footer {
      background-color: var(--primary-blue);
      color: white;
    }
    
    .site-footer a {
      color: white;
      text-decoration: none;
    }
    
    .site-footer a:hover {
      text-decoration: underline;
    }
    
    /* Styles sp√©cifiques √† la page contact */
    .contact-hero {
      background: linear-gradient(rgba(42, 164, 205, 0.9), rgba(42, 164, 205, 0.7)), url('../public/assets/images/casa2.png');
      background-size: cover;
      background-position: center;
      color: white;
      border-radius: 12px;
      padding: 3rem 2rem;
      margin-bottom: 3rem;
    }
    
    .contact-card {
      border: none;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      transition: transform 0.3s ease;
    }
    
    .contact-card:hover {
      transform: translateY(-5px);
    }
    
    .contact-icon {
      width: 60px;
      height: 60px;
      background-color: var(--primary-blue);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }
    
    .contact-form {
      background-color: #f8f9fa;
      border-radius: 10px;
      padding: 2rem;
    }
    
    .form-control, .form-select {
      padding: 0.75rem 1rem;
    }
    
    textarea.form-control {
      min-height: 150px;
    }
    
    .map-container {
      height: 100%;
      min-height: 300px;
      border-radius: 10px;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-branding sticky-top">
    <div class="container">
      <a class="navbar-brand" href="../index.html">
        <img src="../public/assets/images/logo_casahome.png" alt="Teranga Home Logo">
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav" aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="nav">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="families.html">Familles</a></li>
          <li class="nav-item"><a class="nav-link" href="search.html">Recherche</a></li>
          <li class="nav-item"><a class="nav-link active" href="contact.html">Contact</a></li>
        </ul>
        <div class="d-flex">
          <a class="btn btn-outline-primary" href="login.html">Connexion</a>
          <a class="btn btn-primary ms-2" href="register.html">Inscription</a>
        </div>
      </div>
    </div>
  </nav>

  <main class="container py-4">
    <!-- Hero Section -->
    <div class="contact-hero">
      <div class="row align-items-center">
        <div class="col-lg-8">
          <h1 class="fw-bold mb-3">Contactez-nous</h1>
          <p class="lead mb-4">Nous sommes l√† pour r√©pondre √† vos questions et vous aider √† organiser votre s√©jour au S√©n√©gal.</p>
        </div>
      </div>
    </div>

    <div class="row g-4 mb-5">
      <!-- Carte Contact 1 -->
      <div class="col-md-4">
        <div class="contact-card h-100 p-4 text-center">
          <div class="contact-icon mx-auto">
            <i class="bi bi-telephone"></i>
          </div>
          <h5 class="fw-bold mb-3">Par t√©l√©phone</h5>
          <p class="mb-2">Disponible du lundi au vendredi</p>
          <p class="h5">+221 33 123 45 67</p>
          <p class="small text-muted mt-2">9h-18h (GMT)</p>
        </div>
      </div>
      
      <!-- Carte Contact 2 -->
      <div class="col-md-4">
        <div class="contact-card h-100 p-4 text-center">
          <div class="contact-icon mx-auto">
            <i class="bi bi-envelope"></i>
          </div>
          <h5 class="fw-bold mb-3">Par email</h5>
          <p class="mb-3">R√©ponse sous 24h</p>
          <a href="mailto:contact@terangahome.sn" class="btn btn-outline-primary">contact@terangahome.sn</a>
        </div>
      </div>
      
      <!-- Carte Contact 3 -->
      <div class="col-md-4">
        <div class="contact-card h-100 p-4 text-center">
          <div class="contact-icon mx-auto">
            <i class="bi bi-chat-dots"></i>
          </div>
          <h5 class="fw-bold mb-3">Chat en direct</h5>
          <p class="mb-3">Disponible 7j/7</p>
          <a href="#" class="btn btn-primary" onclick="openChatbot()">Ouvrir le chat</a>
        </div>
      </div>
    </div>

    <div class="row g-4">
      <!-- Formulaire de contact -->
      <div class="col-lg-7">
        <div class="contact-form h-100">
          <h3 class="fw-bold mb-4">Envoyez-nous un message</h3>
          <form id="contactForm">
            <div class="row g-3">
              <div class="col-md-6">
                <label for="firstName" class="form-label">Pr√©nom</label>
                <input type="text" class="form-control" id="firstName" required>
              </div>
              <div class="col-md-6">
                <label for="lastName" class="form-label">Nom</label>
                <input type="text" class="form-control" id="lastName" required>
              </div>
            </div>
            
            <div class="mb-3 mt-3">
              <label for="email" class="form-label">Adresse email</label>
              <input type="email" class="form-control" id="email" required>
            </div>
            
            <div class="mb-3">
              <label for="subject" class="form-label">Sujet</label>
              <select class="form-select" id="subject" required>
                <option value="" selected disabled>S√©lectionnez un sujet</option>
                <option>Demande d'information</option>
                <option>Probl√®me technique</option>
                <option>Demande de partenariat</option>
                <option>Autre</option>
              </select>
            </div>
            
            <div class="mb-3">
              <label for="message" class="form-label">Message</label>
              <textarea class="form-control" id="message" required></textarea>
            </div>
            
            <div class="mb-3 form-check">
              <input type="checkbox" class="form-check-input" id="newsletter" checked>
              <label class="form-check-label" for="newsletter">Recevoir la newsletter</label>
            </div>
            
            <button type="submit" class="btn btn-primary px-4 py-2">Envoyer le message</button>
          </form>
        </div>
      </div>
      
      <!-- Carte et adresse -->
      <div class="col-lg-5">
        <div class="card h-100 border-0 shadow-sm">
          <div class="card-body p-0">
            <div class="map-container">
              <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3894.274346011854!2d-16.26655742557835!3d12.5641531236816!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xee79110d8ab3a63%3A0x156053c2df89f524!2sBignona!5e0!3m2!1sfr!2ssn!4v1754752654787!5m2!1sfr!2ssn" width="100%" height="300" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
          </div>
          <div class="card-footer bg-white">
            <h5 class="fw-bold mb-3"><i class="bi bi-geo-alt-fill text-primary me-2"></i>Notre adresse</h5>
            <p class="mb-1">123 Avenue de Casamance</p>
            <p class="mb-1">BP 1234, Ziguinchor</p>
            <p>S√©n√©gal</p>
            
            <h5 class="fw-bold mb-3 mt-4"><i class="bi bi-clock-fill text-primary me-2"></i>Horaires</h5>
            <p class="mb-1"><strong>Lun-Ven:</strong> 9h-18h</p>
            <p><strong>Sam:</strong> 10h-15h</p>
          </div>
        </div>
      </div>
    </div>
    
    <!-- FAQ Section -->
    <div class="row mt-5">
      <div class="col-12">
        <div class="card border-0 shadow-sm">
          <div class="card-body">
            <h3 class="fw-bold mb-4"><i class="bi bi-question-circle-fill text-primary me-2"></i>Questions fr√©quentes</h3>
            
            <div class="accordion" id="faqAccordion">
              <div class="accordion-item">
                <h2 class="accordion-header" id="faqHeadingOne">
                  <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseOne" aria-expanded="true" aria-controls="faqCollapseOne">
                    Comment fonctionne l'h√©bergement chez l'habitant ?
                  </button>
                </h2>
                <div id="faqCollapseOne" class="accordion-collapse collapse show" aria-labelledby="faqHeadingOne" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Vous choisissez une famille selon vos pr√©f√©rences. Nous facilitons la mise en relation et vous recevez toutes les informations pratiques pour pr√©parer votre s√©jour.
                  </div>
                </div>
              </div>
              <div class="accordion-item">
                <h2 class="accordion-header" id="faqHeadingTwo">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseTwo" aria-expanded="false" aria-controls="faqCollapseTwo">
                    Les paiements sont-ils s√©curis√©s ?
                  </button>
                </h2>
                <div id="faqCollapseTwo" class="accordion-collapse collapse" aria-labelledby="faqHeadingTwo" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Oui, nous utilisons des prestataires de paiement reconnus qui respectent les normes de s√©curit√© les plus strictes.
                  </div>
                </div>
              </div>
              <div class="accordion-item">
                <h2 class="accordion-header" id="faqHeadingThree">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseThree" aria-expanded="false" aria-controls="faqCollapseThree">
                    Puis-je annuler ou modifier mon s√©jour ?
                  </button>
                </h2>
                <div id="faqCollapseThree" class="accordion-collapse collapse" aria-labelledby="faqHeadingThree" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Les conditions d'annulation varient selon la famille d'accueil. Contactez-nous pour toute demande de modification ou d'annulation.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </main>

  <!-- Footer -->
  <footer class="site-footer mt-5">
    <div class="container py-5">
      <div class="row">
        <div class="col-lg-4 mb-4 mb-lg-0">
          <h3 class="h5 mb-3 d-flex align-items-center">
            <img src="../public/assets/images/logo_casahome_white.png" alt="Teranga Home Logo" height="40" class="me-2">
            Teranga Home
          </h3>
          <p>Plateforme de tourisme communautaire et solidaire au S√©n√©gal. Nous connectons les voyageurs avec les familles d'accueil pour des exp√©riences authentiques.</p>
          <div class="mt-4">
            <a href="#" class="text-white me-3" aria-label="Facebook"><i class="bi bi-facebook" style="font-size: 1.5rem;"></i></a>
            <a href="#" class="text-white me-3" aria-label="Instagram"><i class="bi bi-instagram" style="font-size: 1.5rem;"></i></a>
            <a href="#" class="text-white me-3" aria-label="Twitter"><i class="bi bi-twitter-x" style="font-size: 1.5rem;"></i></a>
            <a href="#" class="text-white" aria-label="YouTube"><i class="bi bi-youtube" style="font-size: 1.5rem;"></i></a>
          </div>
        </div>
        <div class="col-lg-2 col-md-6 mb-4 mb-md-0">
          <h5 class="h6 mb-3">Navigation</h5>
          <ul class="list-unstyled">
            <li class="mb-2"><a href="../index.html">Accueil</a></li>
            <li class="mb-2"><a href="families.html">Familles</a></li>
            <li class="mb-2"><a href="search.html">Recherche</a></li>
            <li class="mb-2"><a href="../index.html#services">Services</a></li>
            <li class="mb-2"><a href="contact.html">Contact</a></li>
          </ul>
        </div>
        <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
          <h5 class="h6 mb-3">Informations</h5>
          <ul class="list-unstyled">
            <li class="mb-2"><a href="about.html">√Ä propos</a></li>
            <li class="mb-2"><a href="how-it-works.html">Comment √ßa marche</a></li>
            <li class="mb-2"><a href="blog.html">Blog</a></li>
            <li class="mb-2"><a href="faq.html">FAQ</a></li>
            <li class="mb-2"><a href="pricing.html">Tarifs</a></li>
          </ul>
        </div>
        <div class="col-lg-3 col-md-6">
          <h5 class="h6 mb-3">L√©gal</h5>
          <ul class="list-unstyled">
            <li class="mb-2"><a href="terms.html">Conditions g√©n√©rales</a></li>
            <li class="mb-2"><a href="privacy.html">Politique de confidentialit√©</a></li>
            <li class="mb-2"><a href="legal.html">Mentions l√©gales</a></li>
            <li class="mb-2"><a href="cookies.html">Cookies</a></li>
            <li class="mb-2"><a href="sitemap.html">Plan du site</a></li>
          </ul>
        </div>
      </div>
      <hr class="my-4" style="border-color: rgba(255,255,255,0.1);">
      <div class="d-flex flex-column flex-md-row justify-content-between align-items-center">
        <div>&copy; <span id="year"></span> Teranga Home. Tous droits r√©serv√©s.</div>
        <div class="d-flex gap-3 mt-3 mt-md-0">
          <a href="#"><i class="bi bi-credit-card me-1"></i> Paiements s√©curis√©s</a>
          <a href="#"><i class="bi bi-shield-check me-1"></i> S√©curit√© des donn√©es</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Chatbot Widget avec Lottie -->
  <div id="chatbot-bubble" style="position: fixed; bottom: 32px; right: 32px; z-index: 9999; background: #2AA4CD; border-radius: 50px; box-shadow: 0 4px 16px rgba(0,0,0,.1); width: 74px; height: 74px; display: flex; align-items: center; justify-content: center; cursor: pointer; overflow: hidden;">
    <dotlottie-player 
      src="https://lottie.host/d63e8e4e-633b-49e6-a2b1-d4cb02b9229f/uuRubT9e46.lottie" 
      background="transparent" 
      speed="1" 
      style="width: 58px; height: 58px;" 
      loop 
      autoplay>
    </dotlottie-player>
  </div>
  
  <div id="chatbot-window" style="display:none; position: fixed; bottom: 110px; right: 32px; width:350px; max-width:90vw; height:440px; background:#fff; z-index:10000; border-radius:16px; box-shadow:0 8px 32px rgba(0,0,0,0.17); border:1px solid #eee; overflow:hidden; flex-direction:column;">
    <div style="background:#2AA4CD; color:#fff; padding:16px; display:flex; align-items:center; justify-content:space-between;">
      <div style="display:flex; align-items:center;">
        <dotlottie-player 
          src="https://lottie.host/d63e8e4e-633b-49e6-a2b1-d4cb02b9229f/uuRubT9e46.lottie" 
          background="transparent" 
          speed="1" 
          style="width: 32px; height: 32px; margin-right: 12px;" 
          loop 
          autoplay>
        </dotlottie-player>
        <span style="font-weight:bold;">Guide Teranga</span>
      </div>
      <button id="chatbot-close" style="background:none; border:none; color:#fff; font-size:22px; cursor:pointer;">&times;</button>
    </div>
    <div id="chatbot-messages" style="flex:1; padding:14px; background:#f8fafd; overflow-y:auto;"></div>
    <div style="padding:10px; background:#fafbfc; border-top:1px solid #eef1f4;">
      <div id="chatbot-menu" style="margin-bottom:8px;">
        <button class="btn btn-outline-primary btn-sm me-1" onclick="setChatLang('fr')">FR</button>
        <button class="btn btn-outline-primary btn-sm me-1" onclick="setChatLang('en')">EN</button>
        <button class="btn btn-secondary btn-sm" onclick="showFAQMenu()">Menu rapide</button>
      </div>
      <form id="chatbot-form" style="display:flex; gap:6px;">
        <input id="chatbot-input" type="text" class="form-control" placeholder="Votre question..." autocomplete="off" style="flex:1;">
        <button class="btn btn-primary" type="submit">Envoyer</button>
      </form>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Ann√©e dynamique
    document.getElementById('year').textContent = new Date().getFullYear();

    // Validation du formulaire de contact
    document.getElementById('contactForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Validation simple
      const required = this.querySelectorAll('[required]');
      let valid = true;
      
      required.forEach(el => {
        if (!el.value.trim()) {
          el.classList.add('is-invalid');
          valid = false;
        } else {
          el.classList.remove('is-invalid');
        }
      });
      
      if (valid) {
        const btn = this.querySelector('button[type="submit"]');
        btn.disabled = true;
        btn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Envoi...';
        
        // Simulation d'envoi
        setTimeout(() => {
          alert('Merci ! Votre message a √©t√© envoy√©. Nous vous r√©pondrons dans les plus brefs d√©lais.');
          this.reset();
          btn.disabled = false;
          btn.innerHTML = 'Envoyer le message';
        }, 2000);
      }
    });

    // Fonction pour ouvrir le chatbot depuis le bouton
    function openChatbot() {
      const bubble = document.getElementById('chatbot-bubble');
      const windowEl = document.getElementById('chatbot-window');
      windowEl.style.display = 'flex';
      bubble.style.display = 'none';
      showWelcome();
    }

    // FAQ data int√©gr√©e pour la page contact
    let chatLang = 'fr';
    let faqData = { 
      fr: [
        {
          "question": "contact teranga home",
          "answer": "Vous pouvez nous contacter par t√©l√©phone au +221 33 123 45 67, par email √† contact@terangahome.sn, ou via notre chat en direct. Nous sommes disponibles du lundi au vendredi de 9h √† 18h."
        },
        {
          "question": "urgence voyage senegal",
          "answer": "En cas d'urgence pendant votre s√©jour, contactez notre assistance 24h/24 au +221 77 123 45 67. Nous avons une √©quipe d√©di√©e pour vous aider en cas de probl√®me."
        },
        {
          "question": "probleme reservation",
          "answer": "Si vous rencontrez un probl√®me avec votre r√©servation, contactez-nous imm√©diatement par t√©l√©phone ou email. Nous ferons le n√©cessaire pour r√©soudre la situation rapidement."
        },
        {
          "question": "partenariat teranga home",
          "answer": "Vous souhaitez devenir partenaire ? Contactez-nous √† partenariat@terangahome.sn avec les d√©tails de votre proposition. Nous √©tudions toutes les collaborations."
        },
        {
          "question": "reclamation service",
          "answer": "Pour toute r√©clamation concernant nos services, √©crivez-nous √† reclamation@terangahome.sn. Nous traitons chaque demande dans les 48 heures."
        },
        {
          "question": "aide technique site",
          "answer": "Probl√®me technique sur le site ? Contactez notre support technique √† support@terangahome.sn en d√©crivant le probl√®me rencontr√©."
        },
        {
          "question": "delai reponse contact",
          "answer": "Nous r√©pondons √† tous les emails dans un d√©lai de 24 heures maximum. Pour les urgences, privil√©giez le t√©l√©phone."
        }
      ],
      en: [
        {
          "question": "contact teranga home",
          "answer": "You can contact us by phone at +221 33 123 45 67, by email at contact@terangahome.sn, or via our live chat. We are available Monday to Friday from 9am to 6pm."
        },
        {
          "question": "travel emergency senegal",
          "answer": "In case of emergency during your stay, contact our 24/7 assistance at +221 77 123 45 67. We have a dedicated team to help you in case of problems."
        }
      ]
    };

    // √âl√©ments DOM du chatbot
    const bubble = document.getElementById('chatbot-bubble');
    const windowEl = document.getElementById('chatbot-window');
    const closeBtn = document.getElementById('chatbot-close');
    const form = document.getElementById('chatbot-form');
    const input = document.getElementById('chatbot-input');
    const messages = document.getElementById('chatbot-messages');

    // Gestionnaires d'√©v√©nements du chatbot
    bubble.onclick = () => {
      windowEl.style.display = 'flex';
      bubble.style.display = 'none';
      showWelcome();
    };

    closeBtn.onclick = () => {
      windowEl.style.display = 'none';
      bubble.style.display = 'flex';
    };

    function setChatLang(lang) {
      chatLang = lang;
      showWelcome();
    }

    function showWelcome() {
      messages.innerHTML = '';
      addBotMsg(chatLang === 'fr'
        ? 'üëã Bonjour ! Je suis votre Guide Teranga. Comment puis-je vous aider ? Posez-moi vos questions sur nos services, les r√©servations, ou utilisez le menu rapide !'
        : 'üëã Hello! I am your Teranga Guide. How can I help you? Ask me about our services, bookings, or use the quick menu!');
    }

    function showFAQMenu() {
      addBotMsg(chatLang === 'fr'
        ? '<b>üìã Menu rapide</b><br>‚Ä¢ Contact et assistance<br>‚Ä¢ Probl√®mes de r√©servation<br>‚Ä¢ Urgences voyage<br>‚Ä¢ Demandes de partenariat<br>‚Ä¢ Support technique<br>‚Ä¢ R√©clamations'
        : '<b>üìã Quick Menu</b><br>‚Ä¢ Contact and assistance<br>‚Ä¢ Booking issues<br>‚Ä¢ Travel emergencies<br>‚Ä¢ Partnership requests<br>‚Ä¢ Technical support<br>‚Ä¢ Complaints'
      );
    }

    function addBotMsg(text) {
      const msg = document.createElement('div');
      msg.style = 'margin:8px 0; text-align:left;';
      msg.innerHTML = `<span style='background:#E6F4F9; color:#2AA4CD; padding:7px 14px; border-radius:16px 16px 16px 6px; display:inline-block; max-width:90%;'>${text}</span>`;
      messages.appendChild(msg);
      messages.scrollTop = messages.scrollHeight;
    }

    function addUserMsg(text) {
      const msg = document.createElement('div');
      msg.style = 'margin:8px 0; text-align:right;';
      msg.innerHTML = `<span style='background:#EB6F27; color:#fff; padding:7px 14px; border-radius:16px 16px 6px 16px; display:inline-block; max-width:90%;'>${text}</span>`;
      messages.appendChild(msg);
      messages.scrollTop = messages.scrollHeight;
    }

    // Normalisation du texte pour la recherche
    function normalizeTxt(str) {
      return str.toLowerCase()
        .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
        .replace(/[^a-z0-9 ]/g, ' ')
        .replace(/\s+/g, ' ')
        .trim();
    }

    // Recherche am√©lior√©e dans la FAQ
    function faqMatch(question, lang) {
      const userQ = normalizeTxt(question);
      
      // Recherche exacte d'abord
      for (const faq of faqData[lang]) {
        if (normalizeTxt(faq.question).includes(userQ) || userQ.includes(normalizeTxt(faq.question))) {
          return faq;
        }
      }
      
      // Recherche par mots-cl√©s
      let bestMatch = null;
      let bestScore = 0;
      
      for (const faq of faqData[lang]) {
        const faqQ = normalizeTxt(faq.question);
        const userWords = userQ.split(' ');
        const faqWords = faqQ.split(' ');
        
        let score = 0;
        for (const userWord of userWords) {
          if (userWord.length > 3) {
            for (const faqWord of faqWords) {
              if (faqWord.includes(userWord) || userWord.includes(faqWord)) {
                score += userWord.length;
                break;
              }
            }
          }
        }
        
        if (score > bestScore && score > 2) {
          bestScore = score;
          bestMatch = faq;
        }
      }
      
      return bestMatch;
    }

    // Gestion du formulaire du chatbot
    form.onsubmit = (e) => {
      e.preventDefault();
      const txt = input.value.trim();
      if (!txt) return;
      
      addUserMsg(txt);
      input.value = '';
      
      // Simulation de d√©lai de traitement
      setTimeout(() => {
        const reply = faqMatch(txt, chatLang);
        
        if (reply) {
          addBotMsg(reply.answer);
        } else {
          // R√©ponses intelligentes par d√©faut
          const lowerTxt = txt.toLowerCase();
          
          if (lowerTxt.includes('bonjour') || lowerTxt.includes('hello') || lowerTxt.includes('salut')) {
            addBotMsg(chatLang === 'fr' ? 
              "Bonjour ! üòä Je suis ravi de vous aider. Posez-moi vos questions sur nos services de contact, les r√©servations ou toute autre demande !" :
              "Hello! üòä I'm happy to help you. Ask me about our contact services, bookings or any other request!");
          } 
          else if (lowerTxt.includes('merci') || lowerTxt.includes('thank')) {
            addBotMsg(chatLang === 'fr' ?
              "Avec plaisir ! N'h√©sitez pas si vous avez d'autres questions. Bonne journ√©e ! üåü" :
              "You're welcome! Feel free to ask if you have other questions. Have a great day! üåü");
          }
          else if (lowerTxt.includes('urgence') || lowerTxt.includes('urgence') || lowerTxt.includes('emergency')) {
            addBotMsg(chatLang === 'fr' ?
              "üö® Pour les urgences, contactez imm√©diatement notre assistance 24h/24 au +221 77 123 45 67. Nous sommes l√† pour vous aider !" :
              "üö® For emergencies, immediately contact our 24/7 assistance at +221 77 123 45 67. We are here to help you!");
          }
          else if (lowerTxt.includes('reservation') || lowerTxt.includes('booking') || lowerTxt.includes('reserver')) {
            addBotMsg(chatLang === 'fr' ?
              "üìÖ Pour toute question sur les r√©servations, vous pouvez nous contacter au +221 33 123 45 67 ou par email √† reservation@terangahome.sn" :
              "üìÖ For any questions about bookings, you can contact us at +221 33 123 45 67 or by email at reservation@terangahome.sn");
          }
          else {
            addBotMsg(chatLang === 'fr' ?
              "Je suis sp√©cialis√© dans l'assistance et le support. Posez-moi des questions sur :<br>‚Ä¢ Nos coordonn√©es et horaires<br>‚Ä¢ Les probl√®mes de r√©servation<br>‚Ä¢ Les urgences voyage<br>‚Ä¢ Le support technique<br>‚Ä¢ Les demandes de partenariat" :
              "I specialize in assistance and support. Ask me about:<br>‚Ä¢ Our contact details and hours<br>‚Ä¢ Booking issues<br>‚Ä¢ Travel emergencies<br>‚Ä¢ Technical support<br>‚Ä¢ Partnership requests");
          }
        }
      }, 800);
    }

    // Initialisation
    showWelcome();
  </script>
</body>
</html>