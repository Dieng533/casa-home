<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Teranga Home - Tourisme communautaire au S√©n√©gal</title>
  <meta name="description" content="Plateforme de tourisme communautaire et solidaire au S√©n√©gal. Vivez une exp√©rience immersive chez l'habitant dans toutes les r√©gions.">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="shortcut icon" href="./public/assets/images/logo_casahome.png" type="image/x-icon">
  <style>
    :root {
      --primary-blue: #2AA4CD;
      --primary-orange: #EB6F27;
      --light-blue: #E6F4F9;
      --dark-blue: #1A7A9A;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      color: #333;
    }
    
    .navbar-branding {
      background-color: white;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    
    .navbar-brand {
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--primary-blue) !important;
    }
    
    .navbar-brand img {
      height: 60px;
      margin-right: 10px;
    }
    
    .nav-link.active {
      color: var(--primary-blue) !important;
    }
    
    .nav-link.active:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 12px;
      right: 12px;
      height: 2px;
      background-color: var(--primary-blue);
    }
    
    .btn-primary {
      background-color: var(--primary-orange);
      border-color: var(--primary-orange);
      color: white;
    }
    
    .btn-primary:hover {
      background-color: #D96523;
      border-color: #D96523;
    }
    
    .btn-outline-primary {
      border-color: var(--primary-blue);
      color: var(--primary-blue);
    }
    
    .btn-outline-primary:hover {
      background-color: var(--primary-blue);
      color: white;
    }
    
    .text-primary {
      color: var(--primary-blue) !important;
    }
    
    .hero {
      background: linear-gradient(rgba(42, 164, 205, 0.9), rgba(42, 164, 205, 0.7)), url('public/assets/images/hero-bg.jpg');
      background-size: cover;
      background-position: center;
      border-radius: 12px;
      color: white;
    }
    
    .hero h1 {
      font-size: 3.5rem;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
    }
    
    .hero p {
      font-size: 1.2rem;
      opacity: 0.9;
    }
    
    .service-card {
      border: none;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .service-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }
    
    .service-card .card-body {
      padding: 1.5rem;
    }
    
    .service-card .card-title {
      font-weight: 600;
      margin-bottom: 1rem;
    }
    
    .carousel-caption {
      background: rgba(0, 0, 0, 0.5);
      border-radius: 8px;
      padding: 15px 20px;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      width: auto;
      max-width: 80%;
    }
    
    .carousel-item img {
      height: 400px;
      object-fit: cover;
    }
    
    .site-footer {
      background-color: var(--primary-blue);
      color: white;
    }
    
    .site-footer a {
      color: white;
      text-decoration: none;
    }
    
    .site-footer a:hover {
      text-decoration: underline;
    }
    
    .testimonial-section {
      background-color: var(--light-blue);
      padding: 4rem 0;
      margin: 4rem 0;
    }
    
    .testimonial-card {
      background: white;
      border-radius: 10px;
      padding: 2rem;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    
    .testimonial-card img {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 1rem;
      border: 3px solid var(--primary-blue);
    }
    
    .rating {
      color: var(--primary-orange);
      margin-bottom: 1rem;
    }
    
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2.5rem;
      }
      
      .hero p {
        font-size: 1rem;
      }
      
      .carousel-item img {
        height: 250px;
      }
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-branding sticky-top">
    <div class="container">
      <a class="navbar-brand" href="../index.html">
        <img src="./public/assets/images/logo_casahome.png" alt="Teranga Home Logo">
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav" aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="nav">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link active" href="public/families.html">Familles</a></li>
          <li class="nav-item"><a class="nav-link" href="public/search.html">Recherche</a></li>
          <li class="nav-item"><a class="nav-link" href="public/contact.html">Contact</a></li>
        </ul>
        <div class="d-flex">
          <a class="btn btn-outline-primary" href="public/login.html">Connexion</a>
          <a class="btn btn-primary ms-2" href="public/register.html">Inscription</a>
        </div>
      </div>
    </div>
  </nav>

  <main class="container py-4">
    <!-- Hero Section -->
    <section class="p-5 mb-4 hero rounded-4 overflow-hidden">
      <div class="container py-5">
        <div class="row align-items-center">
          <div class="col-lg-7">
            <h1 class="display-4 fw-bold mb-3">D√©couvrez la Casamance authentique</h1>
            <p class="lead mb-4">Plateforme de tourisme communautaire et solidaire. Vivez une exp√©rience immersive chez l'habitant et participez au d√©veloppement local.</p>
            <div class="d-flex gap-3">
              <a href="#services" class="btn btn-primary btn-lg px-4"><i class="bi bi-map me-2"></i>Explorer</a>
              <a href="public/families.html" class="btn btn-outline-light btn-lg px-4"><i class="bi bi-people me-2"></i>Rencontrer les familles</a>
            </div>
          </div>
          <div class="col-lg-5 d-none d-lg-block">
            <img src="public/assets/images/1.jpg" alt="Voyage en Casamance" class="img-fluid">
          </div>
        </div>
      </div>
    </section>

    <!-- Carousel Section -->
    <section id="homeCarousel" class="carousel slide mb-5 shadow-lg rounded-4 overflow-hidden" data-bs-ride="carousel">
      <div class="carousel-indicators">
        <button type="button" data-bs-target="#homeCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#homeCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#homeCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
      </div>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img src="public/assets/images/casa1.png" class="d-block w-100" alt="Casamance 1" />
          <div class="carousel-caption">
            <h5 class="fw-bold fs-4">D√©couvrir la Casamance</h5>
            <p class="mb-0 d-none d-md-block">Nature pr√©serv√©e, hospitalit√© l√©gendaire et traditions vivantes.</p>
          </div>
        </div>
        <div class="carousel-item">
          <img src="public/assets/images/casa2.png" class="d-block w-100" alt="Casamance 2" />
          <div class="carousel-caption">
            <h5 class="fw-bold fs-4">Familles chaleureuses</h5>
            <p class="mb-0 d-none d-md-block">S√©jours authentiques chez l'habitant pour une immersion totale.</p>
          </div>
        </div>
        <div class="carousel-item">
          <img src="public/assets/images/casa3.png" class="d-block w-100" alt="Casamance 3" />
          <div class="carousel-caption">
            <h5 class="fw-bold fs-4">Culture et traditions</h5>
            <p class="mb-0 d-none d-md-block">Rencontres enrichissantes et savoir-faire locaux √† partager.</p>
          </div>
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#homeCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Pr√©c√©dent</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#homeCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Suivant</span>
      </button>
    </section>

    <!-- Services Section -->
    <section id="services" class="mt-5 mb-5">
      <div class="text-center mb-5">
        <h2 class="fw-bold mb-3">Nos services</h2>
        <p class="lead text-muted mx-auto" style="max-width: 700px;">D√©couvrez une exp√©rience de voyage unique qui profite directement aux communaut√©s locales</p>
      </div>
      <div class="row g-4">
        <div class="col-12 col-md-6 col-lg-3">
          <div class="card h-100 service-card">
            <div class="card-body text-center">
              <div class="mb-3">
                <i class="bi bi-house-heart-fill text-primary" style="font-size: 2rem;"></i>
              </div>
              <h5 class="card-title">H√©bergement chez l'habitant</h5>
              <p class="card-text text-muted">S√©journez dans des familles locales pour une immersion authentique dans la culture casaman√ßaise.</p>
              <a href="public/families.html" class="btn btn-outline-primary mt-3">D√©couvrir</a>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-6 col-lg-3">
          <div class="card h-100 service-card">
            <div class="card-body text-center">
              <div class="mb-3">
                <i class="bi bi-compass-fill text-primary" style="font-size: 2rem;"></i>
              </div>
              <h5 class="card-title">Guides locaux</h5>
              <p class="card-text text-muted">Explorez la r√©gion avec des guides passionn√©s qui partageront leurs connaissances et leurs histoires.</p>
              <a href="public/search.html" class="btn btn-outline-primary mt-3">En savoir plus</a>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-6 col-lg-3">
          <div class="card h-100 service-card">
            <div class="card-body text-center">
              <div class="mb-3">
                <i class="bi bi-binoculars-fill text-primary" style="font-size: 2rem;"></i>
              </div>
              <h5 class="card-title">Excursions et activit√©s</h5>
              <p class="card-text text-muted">Balades en pirogue, randonn√©es, visites culturelles et ateliers artisanaux.</p>
              <a href="public/search.html" class="btn btn-outline-primary mt-3">Voir les options</a>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-6 col-lg-3">
          <div class="card h-100 service-card">
            <div class="card-body text-center">
              <div class="mb-3">
                <i class="bi bi-emoji-smile-fill text-primary" style="font-size: 2rem;"></i>
              </div>
              <h5 class="card-title">Culture et gastronomie</h5>
              <p class="card-text text-muted">Partagez des repas traditionnels et d√©couvrez les savoir-faire locaux avec vos h√¥tes.</p>
              <a href="public/contact.html" class="btn btn-outline-primary mt-3">Nous contacter</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonial-section rounded-4">
      <div class="container">
        <div class="text-center mb-5">
          <h2 class="fw-bold">Ils ont v√©cu l'exp√©rience</h2>
          <p class="lead text-muted">D√©couvrez ce que nos voyageurs pensent de leur s√©jour</p>
        </div>
        <div class="row g-4">
          <div class="col-md-4">
            <div class="testimonial-card h-100 text-center">
              <img src="public/assets/images/testimonial1.jpg" alt="Marie D." class="img-fluid">
              <div class="rating">
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
              </div>
              <p class="mb-3">"Une exp√©rience incroyable avec la famille Diatta. J'ai d√©couvert une culture riche et des paysages √† couper le souffle."</p>
              <h5 class="mb-1">Marie D.</h5>
              <p class="text-muted small">Paris, France</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="testimonial-card h-100 text-center">
              <img src="public/assets/images/testimonial2.jpg" alt="Thomas L." class="img-fluid">
              <div class="rating">
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
              </div>
              <p class="mb-3">"Le tourisme communautaire change tout. Je me suis senti accueilli comme un membre de la famille. √Ä refaire sans h√©siter!"</p>
              <h5 class="mb-1">Thomas L.</h5>
              <p class="text-muted small">Bruxelles, Belgique</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="testimonial-card h-100 text-center">
              <img src="public/assets/images/testimonial3.jpg" alt="Amina S." class="img-fluid">
              <div class="rating">
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-half"></i>
              </div>
              <p class="mb-3">"La Casamance est magnifique, mais ce sont les rencontres avec les habitants qui ont rendu ce voyage inoubliable."</p>
              <h5 class="mb-1">Amina S.</h5>
              <p class="text-muted small">Montr√©al, Canada</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Call to Action -->
    <section class="my-5 py-5 text-center bg-light rounded-4">
      <div class="container">
        <h2 class="fw-bold mb-4">Pr√™t √† vivre l'aventure ?</h2>
        <p class="lead mb-4">Rejoignez notre communaut√© de voyageurs et d√©couvrez la Casamance autrement</p>
        <a href="public/register.html" class="btn btn-primary btn-lg px-5"><i class="bi bi-person-plus me-2"></i>S'inscrire maintenant</a>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container py-5">
      <div class="row">
        <div class="col-lg-4 mb-4 mb-lg-0">
          <h3 class="h5 mb-3"><i class="bi bi-house-heart me-2"></i>Teranga Home</h3>
          <p>Plateforme de tourisme communautaire et solidaire en Casamance. Nous connectons les voyageurs avec les familles d'accueil pour des exp√©riences authentiques.</p>
          <div class="mt-4">
            <a href="#" class="text-white me-3"><i class="bi bi-facebook" style="font-size: 1.5rem;"></i></a>
            <a href="#" class="text-white me-3"><i class="bi bi-instagram" style="font-size: 1.5rem;"></i></a>
            <a href="#" class="text-white me-3"><i class="bi bi-twitter-x" style="font-size: 1.5rem;"></i></a>
          </div>
        </div>
        <div class="col-lg-2 col-md-6 mb-4 mb-md-0">
          <h5 class="h6 mb-3">Navigation</h5>
          <ul class="list-unstyled">
            <li class="mb-2"><a href="index.html">Accueil</a></li>
            <li class="mb-2"><a href="public/families.html">Familles</a></li>
            <li class="mb-2"><a href="public/search.html">Recherche</a></li>
            <li class="mb-2"><a href="#services">Services</a></li>
            <li class="mb-2"><a href="public/contact.html">Contact</a></li>
          </ul>
        </div>
        <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
          <h5 class="h6 mb-3">Informations</h5>
          <ul class="list-unstyled">
            <li class="mb-2"><a href="#">√Ä propos</a></li>
            <li class="mb-2"><a href="#">Comment √ßa marche</a></li>
            <li class="mb-2"><a href="#">Blog</a></li>
            <li class="mb-2"><a href="#">FAQ</a></li>
          </ul>
        </div>
        <div class="col-lg-3 col-md-6">
          <h5 class="h6 mb-3">L√©gal</h5>
          <ul class="list-unstyled">
            <li class="mb-2"><a href="#">Conditions g√©n√©rales</a></li>
            <li class="mb-2"><a href="#">Politique de confidentialit√©</a></li>
            <li class="mb-2"><a href="#">Mentions l√©gales</a></li>
            <li class="mb-2"><a href="#">Cookies</a></li>
          </ul>
        </div>
      </div>
      <hr class="my-4" style="border-color: rgba(255,255,255,0.1);">
      <div class="d-flex flex-column flex-md-row justify-content-between align-items-center">
        <div>&copy; <span id="year"></span> Teranga Home. Tous droits r√©serv√©s.</div>
        <div class="d-flex gap-3 mt-3 mt-md-0">
          <a href="#"><i class="bi bi-credit-card me-1"></i> Paiements s√©curis√©s</a>
        </div>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    
    // Animation for service cards on scroll
    document.addEventListener('DOMContentLoaded', function() {
      const serviceCards = document.querySelectorAll('.service-card');
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = 1;
            entry.target.style.transform = 'translateY(0)';
          }
        });
      }, { threshold: 0.1 });
      
      serviceCards.forEach(card => {
        card.style.opacity = 0;
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
        observer.observe(card);
      });
    });
  </script>

  <!-- Chatbot Widget (d√©but) -->
  <div id="chatbot-bubble" style="position: fixed; bottom: 32px; right: 32px; z-index: 9999; background: #2AA4CD; border-radius: 50px; box-shadow: 0 4px 16px rgba(0,0,0,.1); width: 64px; height: 64px; display: flex; align-items: center; justify-content: center; cursor: pointer;">
    <img src="public/assets/images/logo_casahome.png" alt="Bot" style="width:36px; height:36px; border-radius:50%;">
  </div>
  <div id="chatbot-window" style="display:none; position: fixed; bottom: 110px; right: 32px; width:350px; max-width:90vw; height:440px; background:#fff; z-index:10000; border-radius:16px; box-shadow:0 8px 32px rgba(0,0,0,0.17); border:1px solid #eee; overflow:hidden; flex-direction:column;">
    <div style="background:#2AA4CD; color:#fff; padding:16px; display:flex; align-items:center; justify-content:space-between;">
      <div style="display:flex; align-items:center;">
        <img src="public/assets/images/logo_casahome.png" alt="Bot" style="width:32px; height:32px; border-radius:50%; margin-right:12px;">
        <span style="font-weight:bold;">Guide Teranga</span>
      </div>
      <button id="chatbot-close" style="background:none; border:none; color:#fff; font-size:22px; cursor:pointer;">&times;</button>
    </div>
    <div id="chatbot-messages" style="flex:1; padding:14px; background:#f8fafd; overflow-y:auto;"></div>
    <div style="padding:10px; background:#fafbfc; border-top:1px solid #eef1f4;">
      <div id="chatbot-menu" style="margin-bottom:8px;">
        <button class="btn btn-outline-primary btn-sm me-1" onclick="setChatLang('fr')">FR</button>
        <button class="btn btn-outline-primary btn-sm me-1" onclick="setChatLang('en')">EN</button>
        <button class="btn btn-secondary btn-sm" onclick="showFAQMenu()">Menu rapide</button>
      </div>
      <form id="chatbot-form" style="display:flex; gap:6px;">
        <input id="chatbot-input" type="text" class="form-control" placeholder="Votre question..." autocomplete="off" style="flex:1;">
        <button class="btn btn-primary" type="submit">Envoyer</button>
      </form>
    </div>
  </div>
  <!-- Chatbot Widget (fin) -->

  <script>
    // FAQ data int√©gr√©e directement
    let chatLang = 'fr';
    let faqData = { 
      fr: [
        {
          "question": "tourisme communautaire casamance",
          "answer": "Le tourisme communautaire en Casamance permet de s√©journer chez l'habitant et participer √† la vie locale. Les revenus b√©n√©ficient directement aux communaut√©s et pr√©servent les traditions."
        },
        {
          "question": "comment reserver hebergement",
          "answer": "Cr√©ez un compte, consultez les familles sur la page 'Familles' et r√©servez en ligne. Les prix vont de 15‚Ç¨ √† 40‚Ç¨ par nuit avec petit-d√©jeuner."
        },
        {
          "question": "meilleure periode visiter casamance",
          "answer": "La meilleure p√©riode est de novembre √† mai (saison s√®che), avec des temp√©ratures agr√©ables et peu de pluie."
        },
        {
          "question": "destinations populaires casamance",
          "answer": "Ziguinchor, Cap Skirring, Oussouye, l'√Æle de Karabane, et le parc national de la Basse-Casamance."
        },
        {
          "question": "plats traditionnels senegal",
          "answer": "Riz au poisson, poulet Yassa, domoda, maf√©, et fruits tropicaux comme les mangues et bananes."
        },
        {
          "question": "visa senegal",
          "answer": "Les ressortissants UE, Canada et USA n'ont pas besoin de visa pour moins de 90 jours. Passeport valide requis."
        },
        {
          "question": "activites culturelles",
          "answer": "Danse traditionnelle, tissage, cuisine locale, visite de march√©s, et c√©r√©monies selon la p√©riode."
        },
        {
          "question": "comment payer",
          "answer": "Paiements s√©curis√©s en ligne par carte bancaire ou virement. 80% revient directement aux familles."
        },
        {
          "question": "transport casamance",
          "answer": "Taxis-brousse, pirogues pour les √Æles, et location de v√©hicules. Nous aidons √† organiser votre transport."
        },
        {
          "question": "hebergements proposes",
          "answer": "Chambres chez l'habitant, cases traditionnelles, et √©colodges g√©r√©s par les communaut√©s locales."
        },
        {
          "question": "qu est ce que teranga home",
          "answer": "Teranga Home est une plateforme de tourisme communautaire au S√©n√©gal qui connecte les voyageurs avec des familles d'accueil pour des exp√©riences authentiques."
        },
        {
          "question": "familles d accueil",
          "answer": "Nos familles d'accueil sont soigneusement s√©lectionn√©es et form√©es pour vous offrir un accueil chaleureux et authentique."
        }
      ],
      en: [
        {
          "question": "community tourism casamance", 
          "answer": "Community tourism in Casamance involves staying with local families and participating in community life. Revenue directly benefits local communities."
        },
        {
          "question": "how to book accommodation",
          "answer": "Create an account, browse families on the 'Families' page, and book online. Prices range from ‚Ç¨15 to ‚Ç¨40 per night with breakfast."
        },
        {
          "question": "best time to visit casamance",
          "answer": "The best period is from November to May (dry season), with pleasant temperatures and little rain."
        },
        {
          "question": "popular destinations casamance",
          "answer": "Ziguinchor, Cap Skirring, Oussouye, Karabane Island, and the Basse-Casamance National Park."
        }
      ]
    };

    // √âl√©ments DOM
    const bubble = document.getElementById('chatbot-bubble');
    const windowEl = document.getElementById('chatbot-window');
    const closeBtn = document.getElementById('chatbot-close');
    const form = document.getElementById('chatbot-form');
    const input = document.getElementById('chatbot-input');
    const messages = document.getElementById('chatbot-messages');

    // Gestionnaires d'√©v√©nements
    bubble.onclick = () => {
      windowEl.style.display = 'flex';
      bubble.style.display = 'none';
      showWelcome();
    };

    closeBtn.onclick = () => {
      windowEl.style.display = 'none';
      bubble.style.display = 'flex';
    };

    function setChatLang(lang) {
      chatLang = lang;
      showWelcome();
    }

    function showWelcome() {
      messages.innerHTML = '';
      addBotMsg(chatLang === 'fr'
        ? 'üëã Bonjour ! Je suis votre Guide Teranga. Posez-moi vos questions sur la Casamance, l\'h√©bergement, les activit√©s, ou utilisez le menu rapide !'
        : 'üëã Hello! I am your Teranga Guide. Ask me about Casamance, accommodation, activities, or use the quick menu!');
    }

    function showFAQMenu() {
      addBotMsg(chatLang === 'fr'
        ? '<b>üìã Menu rapide</b><br>‚Ä¢ H√©bergement chez l\'habitant<br>‚Ä¢ Destinations touristiques<br>‚Ä¢ Meilleure p√©riode de visite<br>‚Ä¢ Plats traditionnels<br>‚Ä¢ Transport et d√©placements<br>‚Ä¢ Activit√©s culturelles'
        : '<b>üìã Quick Menu</b><br>‚Ä¢ Homestay accommodation<br>‚Ä¢ Tourist destinations<br>‚Ä¢ Best time to visit<br>‚Ä¢ Traditional dishes<br>‚Ä¢ Transport<br>‚Ä¢ Cultural activities'
      );
    }

    function addBotMsg(text) {
      const msg = document.createElement('div');
      msg.style = 'margin:8px 0; text-align:left;';
      msg.innerHTML = `<span style='background:#E6F4F9; color:#2AA4CD; padding:7px 14px; border-radius:16px 16px 16px 6px; display:inline-block; max-width:90%;'>${text}</span>`;
      messages.appendChild(msg);
      messages.scrollTop = messages.scrollHeight;
    }

    function addUserMsg(text) {
      const msg = document.createElement('div');
      msg.style = 'margin:8px 0; text-align:right;';
      msg.innerHTML = `<span style='background:#EB6F27; color:#fff; padding:7px 14px; border-radius:16px 16px 6px 16px; display:inline-block; max-width:90%;'>${text}</span>`;
      messages.appendChild(msg);
      messages.scrollTop = messages.scrollHeight;
    }

    // Normalisation du texte pour la recherche
    function normalizeTxt(str) {
      return str.toLowerCase()
        .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
        .replace(/[^a-z0-9 ]/g, ' ')
        .replace(/\s+/g, ' ')
        .trim();
    }

    // Recherche am√©lior√©e dans la FAQ
    function faqMatch(question, lang) {
      const userQ = normalizeTxt(question);
      
      // Recherche exacte d'abord
      for (const faq of faqData[lang]) {
        if (normalizeTxt(faq.question).includes(userQ) || userQ.includes(normalizeTxt(faq.question))) {
          return faq;
        }
      }
      
      // Recherche par mots-cl√©s
      let bestMatch = null;
      let bestScore = 0;
      
      for (const faq of faqData[lang]) {
        const faqQ = normalizeTxt(faq.question);
        const userWords = userQ.split(' ');
        const faqWords = faqQ.split(' ');
        
        let score = 0;
        for (const userWord of userWords) {
          if (userWord.length > 3) {
            for (const faqWord of faqWords) {
              if (faqWord.includes(userWord) || userWord.includes(faqWord)) {
                score += userWord.length;
                break;
              }
            }
          }
        }
        
        if (score > bestScore && score > 2) {
          bestScore = score;
          bestMatch = faq;
        }
      }
      
      return bestMatch;
    }

    // Gestion du formulaire
    form.onsubmit = (e) => {
      e.preventDefault();
      const txt = input.value.trim();
      if (!txt) return;
      
      addUserMsg(txt);
      input.value = '';
      
      // Simulation de d√©lai de traitement
      setTimeout(() => {
        const reply = faqMatch(txt, chatLang);
        
        if (reply) {
          addBotMsg(reply.answer);
        } else {
          // R√©ponses intelligentes par d√©faut
          const lowerTxt = txt.toLowerCase();
          
          if (lowerTxt.includes('bonjour') || lowerTxt.includes('hello') || lowerTxt.includes('salut')) {
            addBotMsg(chatLang === 'fr' ? 
              "Bonjour ! üòä Je suis ravi de vous aider √† d√©couvrir la Casamance. Posez-moi vos questions sur l'h√©bergement, les activit√©s, ou la culture locale !" :
              "Hello! üòä I'm happy to help you discover Casamance. Ask me about accommodation, activities, or local culture!");
          } 
          else if (lowerTxt.includes('merci') || lowerTxt.includes('thank')) {
            addBotMsg(chatLang === 'fr' ?
              "Avec plaisir ! N'h√©sitez pas si vous avez d'autres questions. Bonne d√©couverte de la Casamance ! üå¥" :
              "You're welcome! Feel free to ask if you have other questions. Enjoy discovering Casamance! üå¥");
          }
          else if (lowerTxt.includes('prix') || lowerTxt.includes('tarif') || lowerTxt.includes('combien') || lowerTxt.includes('price') || lowerTxt.includes('cost')) {
            addBotMsg(chatLang === 'fr' ?
              "üí∞ Les h√©bergements vont de 15‚Ç¨ √† 40‚Ç¨ par nuit. Consultez notre page 'Familles' pour les tarifs d√©taill√©s selon les villages et saisons." :
              "üí∞ Accommodation ranges from ‚Ç¨15 to ‚Ç¨40 per night. Check our 'Families' page for detailed rates by village and season.");
          }
          else if (lowerTxt.includes('contact') || lowerTxt.includes('email') || lowerTxt.includes('t√©l√©phone') || lowerTxt.includes('phone')) {
            addBotMsg(chatLang === 'fr' ?
              "üìû Contactez-nous via le formulaire de contact ou √† contact@terangahome.sn. Nous r√©pondons sous 24h !" :
              "üìû Contact us via the contact form or at contact@terangahome.sn. We respond within 24 hours!");
          }
          else {
            addBotMsg(chatLang === 'fr' ?
              "Je suis sp√©cialis√© sur la Casamance et le tourisme communautaire. Posez-moi des questions sur :<br>‚Ä¢ L'h√©bergement chez l'habitant<br>‚Ä¢ Les destinations √† visiter<br>‚Ä¢ La culture locale<br>‚Ä¢ Les activit√©s traditionnelles<br>‚Ä¢ La meilleure p√©riode pour venir" :
              "I specialize in Casamance and community tourism. Ask me about:<br>‚Ä¢ Homestay accommodation<br>‚Ä¢ Places to visit<br>‚Ä¢ Local culture<br>‚Ä¢ Traditional activities<br>‚Ä¢ Best time to come");
          }
        }
      }, 800);
    }

    // Initialisation
    showWelcome();
  </script>
</body>
</html>